<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Client-Side Liquid Templates</title>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/liquidjs/dist/liquid.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/styles.css" >
    <meta http-equiv="refresh" content="100" >
  </head>

  <body>

    <div id="result" class="container rcorners"></div>
    <p id="preamble"></p>

    <script type="text/javascript">
      const url = new URLSearchParams(window.location.search).get('url');
      document.getElementById("preamble").innerHTML = url;
      
    </script>
  
    <script type="text/javascript">
//        const template = document.querySelector('[type="text/template"]')
        const result = document.querySelector('#result')
        const engine = new liquidjs.Liquid()
        $.get("./templates/template.liquid", function(ltemplate) {
            console.log(ltemplate)
            const resourceUrl = new URLSearchParams(window.location.search).get('url');
            $.getJSON(resourceUrl, function(json) {
// index.html?url=./resources/Bundle-005-CanifugCremolum-EE-FullProduct.json
//            $.getJSON("./resources/Bundle-005-CanifugCremolum-EE-FullProduct.json", function(json) {
                console.log(json)
                engine
                .parseAndRender(ltemplate, json)
                .then(html => result.innerHTML = html)
            });
        });

      </script>

  </body>
</html>